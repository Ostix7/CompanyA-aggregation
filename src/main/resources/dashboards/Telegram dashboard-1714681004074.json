{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": {
          "type": "grafana",
          "uid": "-- Grafana --"
        },
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "type": "dashboard"
      }
    ]
  },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 0,
  "id": 15,
  "links": [],
  "panels": [
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "id": 17,
      "panels": [
        {
          "datasource": {
            "type": "grafana-postgresql-datasource",
            "uid": "edixgednkrtvka"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 80,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 1,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 1
          },
          "id": 23,
          "options": {
            "barRadius": 0,
            "barWidth": 0.97,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "auto",
            "showValue": "auto",
            "stacking": "none",
            "tooltip": {
              "mode": "single",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 100
          },
          "targets": [
            {
              "datasource": {
                "type": "grafana-postgresql-datasource",
                "uid": "edixgednkrtvka"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "SELECT to_timestamp((EXTRACT(EPOCH FROM TIMESTAMP '${__from:date:YYYY-MM-DD}')) + (DIV(EXTRACT(EPOCH FROM DATE_TRUNC('${time_frame:text}', t1.post_date)) \r\n- (EXTRACT(EPOCH FROM TIMESTAMP '${__from:date:YYYY-MM-DD}')), (${time_frame:value}*${step})) * (${time_frame:value}*${step}))) AS aggregated_date, SUM(t1.view_count) as views_numb \r\nFROM telegram_post t1\r\nWHERE t1.segment = ${segment:sqlstring} AND t1.post_date BETWEEN '${__from:date:YYYY-MM-DD}' AND '${__to:date:YYYY-MM-DD}'\r\nGROUP BY aggregated_date \r\nORDER BY aggregated_date, SUM(t1.view_count) DESC\r\n",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "Number of views for segement $segment",
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "grafana-postgresql-datasource",
            "uid": "edixgednkrtvka"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 80,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 1,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 1
          },
          "id": 20,
          "options": {
            "barRadius": 0,
            "barWidth": 0.97,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "auto",
            "showValue": "auto",
            "stacking": "none",
            "tooltip": {
              "mode": "single",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "targets": [
            {
              "datasource": {
                "type": "grafana-postgresql-datasource",
                "uid": "edixgednkrtvka"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "select lower(topic_modeling_phrases) as phrase, count(lower(topic_modeling_phrases)) as occurences \r\nfrom telegram_post_phrase_topics t1 join telegram_post t2 on t1.telegram_post_id = t2.id \r\n\tjoin telegram_channel t3 on t2.channel_id = t3.channel_id \r\nwhere segment = ${segment:sqlstring} and $__timeFilter(post_date) \r\ngroup by lower(topic_modeling_phrases) \r\norder by occurences desc\r\nlimit ${topic_modeling_words};\r\n",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "Top phrases for segment ${segment} by period",
          "transparent": true,
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "grafana-postgresql-datasource",
            "uid": "edixgednkrtvka"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 80,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 1,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 9
          },
          "id": 22,
          "options": {
            "barRadius": 0,
            "barWidth": 0.97,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "auto",
            "showValue": "auto",
            "stacking": "none",
            "tooltip": {
              "mode": "single",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 100
          },
          "targets": [
            {
              "datasource": {
                "type": "grafana-postgresql-datasource",
                "uid": "edixgednkrtvka"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "SELECT to_timestamp((EXTRACT(EPOCH FROM TIMESTAMP '${__from:date:YYYY-MM-DD}')) + (DIV(EXTRACT(EPOCH FROM DATE_TRUNC('${time_frame:text}', t2.post_date)) \r\n- (EXTRACT(EPOCH FROM TIMESTAMP '${__from:date:YYYY-MM-DD}')), (${time_frame:value}*${step})) * (${time_frame:value}*${step}))) AS aggregated_date, SUM(t1.count) as reactions_numb \r\nFROM telegram_reaction t1 JOIN telegram_post t2 ON t1.post_id = t2.id JOIN telegram_channel t3 ON t2.channel_id = t3.channel_id\r\nWHERE t2.segment = ${segment:sqlstring} AND t2.post_date BETWEEN '${__from:date:YYYY-MM-DD}' AND '${__to:date:YYYY-MM-DD}' \r\nGROUP BY aggregated_date\r\nORDER BY aggregated_date",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "Number of reactions for segment $segment",
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "grafana-postgresql-datasource",
            "uid": "edixgednkrtvka"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 80,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 1,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 9
          },
          "id": 18,
          "options": {
            "barRadius": 0,
            "barWidth": 0.97,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "auto",
            "showValue": "auto",
            "stacking": "none",
            "tooltip": {
              "mode": "single",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 100
          },
          "targets": [
            {
              "datasource": {
                "type": "grafana-postgresql-datasource",
                "uid": "edixgednkrtvka"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "SELECT to_timestamp((EXTRACT(EPOCH FROM TIMESTAMP '${__from:date:YYYY-MM-DD}')) + (DIV(EXTRACT(EPOCH FROM DATE_TRUNC('${time_frame:text}', t1.post_date)) \r\n- (EXTRACT(EPOCH FROM TIMESTAMP '${__from:date:YYYY-MM-DD}')), (${time_frame:value}*${step})) * (${time_frame:value}*${step}))) AS aggregated_date, AVG(t1.sentiment_value) AS avg_sentiment \r\nFROM telegram_post t1 JOIN telegram_channel t2 ON t1.channel_id = t2.channel_id\r\nWHERE t1.segment = ${segment:sqlstring} AND t1.post_date BETWEEN '${__from:date:YYYY-MM-DD}' AND '${__to:date:YYYY-MM-DD}' AND t1.is_processed = TRUE\r\nGROUP BY aggregated_date\r\nORDER BY aggregated_date",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "Average sentiment for segment $segment",
          "transparent": true,
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "grafana-postgresql-datasource",
            "uid": "edixgednkrtvka"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 80,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 1,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 17
          },
          "id": 21,
          "options": {
            "barRadius": 0,
            "barWidth": 0.97,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "auto",
            "showValue": "auto",
            "stacking": "none",
            "tooltip": {
              "mode": "single",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 100
          },
          "targets": [
            {
              "datasource": {
                "type": "grafana-postgresql-datasource",
                "uid": "edixgednkrtvka"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "SELECT to_timestamp((EXTRACT(EPOCH FROM TIMESTAMP '${__from:date:YYYY-MM-DD}')) + (DIV(EXTRACT(EPOCH FROM DATE_TRUNC('${time_frame:text}', t2.post_date)) \r\n- (EXTRACT(EPOCH FROM TIMESTAMP '${__from:date:YYYY-MM-DD}')), (${time_frame:value}*${step})) * (${time_frame:value}*${step}))) AS aggregated_date, COUNT(t1.comment_id) as comment_numb \r\nFROM telegram_comment t1 JOIN telegram_post t2 ON t1.post_id = t2.id JOIN telegram_channel t3 ON t2.channel_id = t3.channel_id\r\nWHERE t2.segment = ${segment:sqlstring} AND t2.post_date BETWEEN '${__from:date:YYYY-MM-DD}' AND '${__to:date:YYYY-MM-DD}'\r\nGROUP BY aggregated_date\r\nORDER BY aggregated_date",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "Number of comments for segment $segment",
          "transparent": true,
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "grafana-postgresql-datasource",
            "uid": "edixgednkrtvka"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 80,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 1,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 17
          },
          "id": 19,
          "options": {
            "barRadius": 0,
            "barWidth": 0.97,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "auto",
            "showValue": "auto",
            "stacking": "none",
            "tooltip": {
              "mode": "single",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "targets": [
            {
              "datasource": {
                "type": "grafana-postgresql-datasource",
                "uid": "edixgednkrtvka"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "select lower(topic_modeling) as word, count(lower(topic_modeling)) as occurences \r\nfrom telegram_post_topics t1 join telegram_post t2 on t1.telegram_post_id = t2.id \r\n\tjoin telegram_channel t3 on t2.channel_id = t3.channel_id \r\nwhere segment = ${segment:sqlstring} and $__timeFilter(post_date) \r\ngroup by lower(topic_modeling) \r\norder by occurences desc\r\nlimit ${topic_modeling_words};",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "Top topics for segement ${segment} by period",
          "transparent": true,
          "type": "barchart"
        }
      ],
      "title": "Metrics for segments",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 1
      },
      "id": 9,
      "panels": [
        {
          "datasource": {
            "type": "grafana-postgresql-datasource",
            "uid": "edixgednkrtvka"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 80,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 1,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 2
          },
          "id": 16,
          "options": {
            "barRadius": 0,
            "barWidth": 0.97,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "auto",
            "showValue": "auto",
            "stacking": "none",
            "tooltip": {
              "mode": "single",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 100
          },
          "targets": [
            {
              "datasource": {
                "type": "grafana-postgresql-datasource",
                "uid": "edixgednkrtvka"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "SELECT to_timestamp((EXTRACT(EPOCH FROM TIMESTAMP '${__from:date:YYYY-MM-DD}')) + (DIV(EXTRACT(EPOCH FROM DATE_TRUNC('${time_frame:text}', t1.post_date)) \r\n- (EXTRACT(EPOCH FROM TIMESTAMP '${__from:date:YYYY-MM-DD}')), (${time_frame:value}*${step})) * (${time_frame:value}*${step}))) AS aggregated_date, SUM(t1.view_count) as views_numb \r\nFROM telegram_post t1 JOIN telegram_channel t2 ON t1.channel_id = t2.channel_id\r\nWHERE t2.channel_title = ${telegram_channel_title:sqlstring} AND t1.post_date BETWEEN '${__from:date:YYYY-MM-DD}' AND '${__to:date:YYYY-MM-DD}' \r\nGROUP BY aggregated_date\r\nORDER BY aggregated_date, SUM(t1.view_count) DESC",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "Number of views on channel ${telegram_channel_title}",
          "transparent": true,
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "grafana-postgresql-datasource",
            "uid": "edixgednkrtvka"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 80,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 1,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 2
          },
          "id": 15,
          "options": {
            "barRadius": 0,
            "barWidth": 0.97,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "auto",
            "showValue": "auto",
            "stacking": "none",
            "tooltip": {
              "mode": "single",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 100
          },
          "targets": [
            {
              "datasource": {
                "type": "grafana-postgresql-datasource",
                "uid": "edixgednkrtvka"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "SELECT to_timestamp((EXTRACT(EPOCH FROM TIMESTAMP '${__from:date:YYYY-MM-DD}')) + (DIV(EXTRACT(EPOCH FROM DATE_TRUNC('${time_frame:text}', t2.post_date)) \r\n- (EXTRACT(EPOCH FROM TIMESTAMP '${__from:date:YYYY-MM-DD}')), (${time_frame:value}*${step})) * (${time_frame:value}*${step}))) AS aggregated_date, SUM(t1.count)\r\nFROM telegram_reaction t1 JOIN telegram_post t2 ON t1.post_id = t2.id JOIN telegram_channel t3 ON t2.channel_id = t3.channel_id \r\nWHERE t2.post_date BETWEEN '${__from:date:YYYY-MM-DD}' AND '${__to:date:YYYY-MM-DD}' AND t3.channel_title = ${telegram_channel_title:sqlstring}  \r\nGROUP BY aggregated_date\r\nORDER BY aggregated_date",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "Number of reactions on channel ${telegram_channel_title}",
          "transparent": true,
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "grafana-postgresql-datasource",
            "uid": "edixgednkrtvka"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 80,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 1,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 10
          },
          "id": 14,
          "options": {
            "barRadius": 0,
            "barWidth": 0.97,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "auto",
            "showValue": "auto",
            "stacking": "none",
            "tooltip": {
              "mode": "single",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 100
          },
          "targets": [
            {
              "datasource": {
                "type": "grafana-postgresql-datasource",
                "uid": "edixgednkrtvka"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "SELECT to_timestamp((EXTRACT(EPOCH FROM TIMESTAMP '${__from:date:YYYY-MM-DD}')) + (DIV(EXTRACT(EPOCH FROM DATE_TRUNC('${time_frame:text}', t2.post_date)) \r\n- (EXTRACT(EPOCH FROM TIMESTAMP '${__from:date:YYYY-MM-DD}')), (${time_frame:value}*${step})) * (${time_frame:value}*${step}))) AS aggregated_date, COUNT(t1.comment_id) AS comments_numb \r\nFROM telegram_comment t1 JOIN telegram_post t2 ON t1.post_id = t2.id JOIN telegram_channel t3 ON t2.channel_id = t3.channel_id \r\nWHERE t2.post_date BETWEEN '${__from:date:YYYY-MM-DD}' AND '${__to:date:YYYY-MM-DD}' AND t3.channel_title = ${telegram_channel_title:sqlstring} \r\nGROUP BY aggregated_date\r\nORDER BY aggregated_date",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "Number of comments on channel ${telegram_channel_title}",
          "transparent": true,
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "grafana-postgresql-datasource",
            "uid": "edixgednkrtvka"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 80,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 1,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 10
          },
          "id": 11,
          "options": {
            "barRadius": 0,
            "barWidth": 0.97,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "auto",
            "showValue": "auto",
            "stacking": "none",
            "tooltip": {
              "mode": "single",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "targets": [
            {
              "datasource": {
                "type": "grafana-postgresql-datasource",
                "uid": "edixgednkrtvka"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "select lower(topic_modeling) as word, count(lower(topic_modeling)) as occurences \r\nfrom telegram_post_topics t1 join telegram_post t2 on t1.telegram_post_id = t2.id \r\n\tjoin telegram_channel t3 on t2.channel_id = t3.channel_id \r\nwhere channel_title = ${telegram_channel_title:sqlstring} and $__timeFilter(post_date) \r\ngroup by lower(topic_modeling) \r\norder by occurences desc\r\nlimit ${topic_modeling_words};",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "Top topics on channel ${telegram_channel_title} by period",
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "grafana-postgresql-datasource",
            "uid": "edixgednkrtvka"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 80,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 1,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 18
          },
          "id": 12,
          "options": {
            "barRadius": 0,
            "barWidth": 0.95,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "auto",
            "showValue": "auto",
            "stacking": "none",
            "tooltip": {
              "mode": "single",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "targets": [
            {
              "datasource": {
                "type": "grafana-postgresql-datasource",
                "uid": "edixgednkrtvka"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "select lower(topic_modeling_phrases) as phrase, count(lower(topic_modeling_phrases)) as occurences \r\nfrom telegram_post_phrase_topics t1 join telegram_post t2 on t1.telegram_post_id = t2.id \r\n\tjoin telegram_channel t3 on t2.channel_id = t3.channel_id \r\nwhere channel_title = ${telegram_channel_title:sqlstring} and $__timeFilter(post_date) \r\ngroup by lower(topic_modeling_phrases) \r\norder by occurences desc\r\nlimit ${topic_modeling_words};",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "Top phrases on channel ${telegram_channel_title} by period",
          "transparent": true,
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "grafana-postgresql-datasource",
            "uid": "edixgednkrtvka"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 80,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 1,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 18
          },
          "id": 10,
          "options": {
            "barRadius": 0,
            "barWidth": 0.97,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "auto",
            "showValue": "auto",
            "stacking": "none",
            "tooltip": {
              "mode": "single",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 100
          },
          "targets": [
            {
              "datasource": {
                "type": "grafana-postgresql-datasource",
                "uid": "edixgednkrtvka"
              },
              "editorMode": "code",
              "format": "table",
              "rawQuery": true,
              "rawSql": "SELECT to_timestamp((EXTRACT(EPOCH FROM TIMESTAMP '${__from:date:YYYY-MM-DD}')) + (DIV(EXTRACT(EPOCH FROM DATE_TRUNC('${time_frame:text}', t1.post_date)) \r\n- (EXTRACT(EPOCH FROM TIMESTAMP '${__from:date:YYYY-MM-DD}')), (${time_frame:value}*${step})) * (${time_frame:value}*${step}))) AS aggregated_date, AVG(t1.sentiment_value)\r\nFROM telegram_post t1 JOIN telegram_channel t2 ON t1.channel_id = t2.channel_id\r\nWHERE t1.post_date BETWEEN '${__from:date:YYYY-MM-DD}' AND '${__to:date:YYYY-MM-DD}' AND t2.channel_title = ${telegram_channel_title:sqlstring} AND t1.is_processed = TRUE\r\nGROUP BY aggregated_date\r\nORDER BY aggregated_date",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "title": "Sentiment values for posts of channel $telegram_channel_title",
          "transparent": true,
          "type": "barchart"
        }
      ],
      "title": "Metrics for channels",
      "type": "row"
    }
  ],
  "refresh": "",
  "schemaVersion": 39,
  "tags": [],
  "templating": {
    "list": [
      {
        "current": {
          "selected": false,
          "text": "GREY ZONE",
          "value": "GREY ZONE"
        },
        "datasource": {
          "type": "grafana-postgresql-datasource",
          "uid": "edixgednkrtvka"
        },
        "definition": "select channel_title from telegram_channel;",
        "hide": 0,
        "includeAll": false,
        "label": "telegram_channel_title",
        "multi": false,
        "name": "telegram_channel_title",
        "options": [],
        "query": "select channel_title from telegram_channel;",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 2,
        "type": "query"
      },
      {
        "current": {
          "selected": false,
          "text": "10",
          "value": "10"
        },
        "hide": 0,
        "name": "topic_modeling_words",
        "options": [
          {
            "selected": true,
            "text": "10",
            "value": "10"
          }
        ],
        "query": "10",
        "skipUrlSync": false,
        "type": "textbox"
      },
      {
        "current": {
          "selected": false,
          "text": "DAY",
          "value": "86400"
        },
        "hide": 0,
        "includeAll": false,
        "label": "time_frame",
        "multi": false,
        "name": "time_frame",
        "options": [
          {
            "selected": true,
            "text": "DAY",
            "value": "86400"
          },
          {
            "selected": false,
            "text": "HOUR",
            "value": "3600"
          }
        ],
        "query": "DAY : 86400, HOUR : 3600",
        "queryValue": "",
        "skipUrlSync": false,
        "type": "custom"
      },
      {
        "current": {
          "selected": false,
          "text": "1",
          "value": "1"
        },
        "hide": 0,
        "name": "step",
        "options": [
          {
            "selected": true,
            "text": "1",
            "value": "1"
          }
        ],
        "query": "1",
        "skipUrlSync": false,
        "type": "textbox"
      },
      {
        "current": {
          "selected": false,
          "text": "ukr",
          "value": "ukr"
        },
        "hide": 0,
        "includeAll": false,
        "label": "segment",
        "multi": false,
        "name": "segment",
        "options": [
          {
            "selected": true,
            "text": "ukr",
            "value": "ukr"
          },
          {
            "selected": false,
            "text": "katsap",
            "value": "katsap"
          },
          {
            "selected": false,
            "text": "western",
            "value": "western"
          }
        ],
        "query": "ukr, katsap, western",
        "queryValue": "",
        "skipUrlSync": false,
        "type": "custom"
      }
    ]
  },
  "time": {
    "from": "now-6h",
    "to": "now"
  },
  "timeRangeUpdatedDuringEditOrView": false,
  "timepicker": {},
  "timezone": "browser",
  "title": "Telegram dashboard",
  "uid": "edixhbzg36e4gc",
  "version": 64,
  "weekStart": ""
}